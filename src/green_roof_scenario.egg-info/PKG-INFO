Metadata-Version: 2.4
Name: green-roof-scenario
Version: 0.1.0
Summary: Empirical Landsat-based green roof scenario modeling.
Author: Green Roof Scenario Maintainers
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.23
Requires-Dist: rasterio>=1.3
Requires-Dist: geopandas>=0.13
Requires-Dist: rasterstats>=0.19
Requires-Dist: scikit-learn>=1.2
Requires-Dist: shapely>=2.0



# Green Roof Scenario ‚Äî Empirical Urban Heat Mitigation Modeling

This repository now ships a reusable Python package (`green_roof_scenario`) plus a thin compatibility script `green_roof_scenario.py`. The package simulates how much **land surface temperature (LST)** would decrease if selected building roofs were converted to **green roofs**, using **remote sensing** and a **data-driven regression model**.

## üì¶ Installation & CLI Usage

```bash
python -m pip install -e .            # install locally (PEP 517/518 via pyproject)
green-roof-scenario --help            # show CLI options
green-roof-scenario \
  --l2_folder data/LC09_L2SP_196023_20250621_20250622_02_T1 \
  --buildings results/buildings_with_lst.gpkg \
  --roof_field predictedroofmaterials \
  --roof_types "concrete, tar_paper" \
  --out_dir results_greening_demo \
  --build_lst --target_ndvi 0.4 --model rf
```

Programmatic use is also supported:

```python
from green_roof_scenario import ScenarioConfig, run_scenario

config = ScenarioConfig(
    l2_folder="data/LC09_L2SP_196023_20250621_20250622_02_T1",
    buildings="results/buildings_with_lst.gpkg",
    roof_field="predictedroofmaterials",
    roof_types="concrete, tar_paper",
    out_dir="results_greening_demo",
    build_lst=True,
    target_ndvi=0.4,
    model="rf",
)
run_scenario(config)
```

### Source layout

The package follows a modern `src/` layout:

| Module | Responsibility |
|--------|----------------|
| `green_roof_scenario.cli` | Argparse-based CLI entry point |
| `green_roof_scenario.config` | Dataclasses for scenario configuration |
| `green_roof_scenario.l2` | Landsat L2 helpers (LST build, NDVI/albedo) |
| `green_roof_scenario.modeling` | Sampling, regression fitting, prediction |
| `green_roof_scenario.masking` | Building filtering and roof fraction rasters |
| `green_roof_scenario.scenario` | High-level orchestration + outputs |
| `green_roof_scenario.io` | Raster IO helpers |

## üéØ Goal

Evaluate the **cooling potential** of green roof interventions **directly from satellite imagery** ‚Äî fast, spatially explicit, and scientifically backed.

This approach does **not** rely on heavy physical climate models. Instead, it follows the **empirical intervention simulation approach** used in multiple **peer-reviewed urban heat studies**, such as:
- S√°nchez-Cordero et al. 2025 (*Remote Sensing*)
- Joshi et al. 2023 (*Springer Urban Intelligence*)
- Calhoun et al. 2024 (*Scientific Reports*)

These studies show that **modifying NDVI and Albedo on rooftops** and re-predicting LST is a scientifically valid method for simulating urban greening scenarios.

## üîß How It Works

1. **Input data**
   - Baseline LST raster (¬∞C) from Landsat 8/9 Level-2 Surface Temperature.
   - Building footprints with a roof type attribute.
   - Either **Landsat Level-2 folder** (auto-compute NDVI/Albedo)  
     or **precomputed NDVI + Albedo rasters**.

2. **Fit an empirical model**
   The script learns how **LST depends on NDVI and albedo** in your own city:
   ```
   LST = a + b √ó NDVI + c √ó Albedo
   ```

3. **Select roof types to ‚Äúgreen‚Äù**
   Example:
   ```
   --roof_types "concrete, tar_paper"
   ```

4. **Simulate greening**
   Only pixels **actually containing roofs are modified**. Their NDVI and albedo are **partially replaced with realistic vegetation values** (derived from existing green areas in the same image).

5. **Predict new scenario LST**
   ```
   delta_LST = scenario_predicted_LST ‚àí baseline_predicted_LST
   ```
   ‚Üí **Negative values = cooling effect**

6. **Export results**
   - `delta_LST.tif` ‚Üí pixel-level cooling map
   - `buildings_greening_impact.gpkg` ‚Üí per-building mean cooling
   - Optional `roof_fraction.tif` ‚Üí visualization of roof pixel influence

## ‚úÖ Output Overview

| File | Description |
|------|-------------|
| `scenario_pred_LST.tif` | Predicted LST *after* greening |
| `delta_LST.tif` | LST change (¬∞C) ‚Äî negative = cooler |
| `roof_fraction.tif` | (optional) roof coverage per pixel |
| `buildings_greening_impact.gpkg` | Each building with mean ŒîLST |
| `_greening_provenance.txt` | Documents roof types, NDVI target, parameters |

## üìö Why This Is Scientifically Valid

This method is directly aligned with **recent remote sensing literature**, which uses **remote sensing + empirical regression models** for green roof simulations ‚Äî instead of heavy simulation tools like ENVI-met.

It is:
- ‚úÖ **Fast and scalable**
- ‚úÖ **Fully satellite-based**
- ‚úÖ **Quantitative and explainable**
- ‚úÖ **Defensible for urban planning and policy**

## üë§ Author / Contact

Your name / institution / email here.
